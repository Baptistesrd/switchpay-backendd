@base = http://127.0.0.1:8000
@api_key = cle-api-entreprise1
@idempotency = 11111111-aaaa-bbbb-cccc-111111111111
@json = application/json

### âœ… Health
GET {{base}}/health

### ğŸ”¢ Version
GET {{base}}/version

### ğŸ“Š Metrics
GET {{base}}/metrics

### ğŸ” (Stripe FR/EUR) â€” Create transaction
POST {{base}}/transaction
x-api-key: {{api_key}}
Idempotency-Key: {{idempotency}}
Content-Type: {{json}}

{
  "montant": 100.0,
  "devise": "EUR",
  "pays": "FR",
  "device": "web"
}

### ğŸ” Rejouer EXACTEMENT la mÃªme requÃªte avec la mÃªme clÃ© â†’ mÃªme rÃ©ponse (idempotency hit)
POST {{base}}/transaction
x-api-key: {{api_key}}
Idempotency-Key: {{idempotency}}
Content-Type: {{json}}

{
  "montant": 100.0,
  "devise": "EUR",
  "pays": "FR",
  "device": "web"
}

### âš ï¸ MÃªme clÃ© MAIS payload diffÃ©rent â†’ 409 attendu
POST {{base}}/transaction
x-api-key: {{api_key}}
Idempotency-Key: {{idempotency}}
Content-Type: {{json}}

{
  "montant": 101.0,
  "devise": "EUR",
  "pays": "FR",
  "device": "web"
}

### ğŸ“„ Lister transactions (pagination par dÃ©faut)
GET {{base}}/transactions

### ğŸ“„ Lister transactions (pagination contrÃ´lÃ©e)
GET {{base}}/transactions?limit=10&offset=0

### âŒ Sans API Key â†’ 403 attendu
POST {{base}}/transaction
Content-Type: {{json}}

{
  "montant": 10,
  "devise": "EUR",
  "pays": "FR",
  "device": "web"
}
